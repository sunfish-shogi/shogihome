import{e as H,f as g,o as h,A as d,a2 as X,D as U,E as q,G as $,g as r,u as N,x as u,t as S,ad as J,F as T,s as ee,ab as y,m as te,_ as se}from"./confirm-LE9pv2Wk.js";const K={};function ne(e){if(K[e])return;const t=document.createElement("img");t.src=e,K[e]=t}var F=(e=>(e.BUSY="busy",e.ERROR="error",e.INFO="info",e.GAME="game",e.INTERNET="internet",e.STOP="stop",e.RESIGN="resign",e.RESEARCH="research",e.END="end",e.QUIZ="quiz",e.EDIT="edit",e.CHECK="check",e.SWAP="swap",e.SWAP_H="swap_h",e.SETTINGS="settings",e.ENGINE_SETTINGS="engineSettings",e.FLIP="flip",e.FILE="file",e.OPEN="open",e.SAVE="save",e.SAVE_AS="saveAs",e.PASTE="paste",e.COPY="copy",e.DELETE="delete",e.COMMENT="comment",e.BRAIN="brain",e.PV="pv",e.CHART="chart",e.PERCENT="percent",e.MONITOR="monitor",e.ARROW_DROP="arrowDrop",e.ARROW_UP="arrowUp",e.FIRST="first",e.BACK="back",e.NEXT="next",e.LAST="last",e.QUESTION="question",e.ANALYSIS="analysis",e.DESCRIPTION="description",e.PLAY="play",e.CLOSE="close",e.CALL="call",e.SCORE="score",e.GRID="grid",e.MATE_SEARCH="mateSearch",e.ADD="add",e.TREE="tree",e.NOTE="note",e.BATCH="batch",e.OPEN_FOLDER="openFolder",e.HISTORY="history",e.PAUSE="pause",e.RESUME="resume",e.HELP="help",e.LICENSE="license",e.LINK="link",e.SHARE="share",e.EQUALIZER="equalizer",e.REFRESH="refresh",e.ROBOT="robot",e.TRASH="trash",e))(F||{});const z={busy:"icon/hourglass_empty.svg",error:"icon/error_outline.svg",info:"icon/info.svg",game:"icon/sports_esports.svg",internet:"icon/language_FILL0.svg",stop:"icon/block.svg",resign:"icon/flag.svg",research:"icon/science.svg",end:"icon/do_disturb_on.svg",quiz:"icon/quiz_FILL0.svg",edit:"icon/app_registration.svg",check:"icon/check_circle.svg",swap:"icon/swap_vert.svg",swap_h:"icon/swap_horiz.svg",settings:"icon/settings.svg",engineSettings:"icon/settings_input_component.svg",flip:"icon/flip_camera_android.svg",file:"icon/draft_FILL0.svg",open:"icon/file_open_FILL0.svg",save:"icon/save_FILL0.svg",saveAs:"icon/save_as_FILL0.svg",paste:"icon/content_paste.svg",copy:"icon/content_copy.svg",delete:"icon/backspace.svg",comment:"icon/edit_note.svg",brain:"icon/psychology.svg",pv:"icon/manage_search_FILL0.svg",chart:"icon/show_chart.svg",percent:"icon/percent.svg",monitor:"icon/browse_activity_FILL0.svg",arrowDrop:"icon/arrow_drop_down.svg",arrowUp:"icon/arrow_drop_up_FILL0.svg",first:"icon/first_page.svg",back:"icon/chevron_left.svg",next:"icon/chevron_right.svg",last:"icon/last_page.svg",question:"icon/help.svg",analysis:"icon/query_stats.svg",description:"icon/description.svg",play:"icon/play_arrow_FILL1.svg",close:"icon/close_FILL0.svg",call:"icon/record_voice_over_FILL0.svg",score:"icon/scoreboard_FILL0.svg",grid:"icon/grid_on_FILL0.svg",mateSearch:"icon/psychology_alt_FILL0.svg",add:"icon/add_circle_FILL0.svg",tree:"icon/account_tree_FILL0.svg",note:"icon/note_alt_FILL0.svg",batch:"icon/home_storage_FILL0.svg",openFolder:"icon/folder_open_FILL0.svg",history:"icon/history_FILL0.svg",pause:"icon/pause_circle_FILL0.svg",resume:"icon/play_circle_FILL0.svg",help:"icon/help_FILL0.svg",license:"icon/license_FILL0.svg",link:"icon/open_in_new_FILL0.svg",share:"icon/share_FILL0.svg",equalizer:"icon/instant_mix_FILL0.svg",refresh:"icon/refresh_FILL0.svg",robot:"icon/smart_toy_FILL0.svg",trash:"icon/delete_FILL0.svg"};Object.values(z).forEach(e=>{ne(e)});const ie=["src"],O=H({__name:"Icon",props:{icon:{type:String,required:!0}},setup(e){return(t,s)=>(h(),g("img",{class:"icon",src:d(z)[e.icon],draggable:"false"},null,8,ie))}});function B(e,t){e.addEventListener("cancel",s=>{s.preventDefault(),s.stopPropagation(),t?.()}),e.addEventListener("keydown",s=>{s.key==="Escape"&&(s.preventDefault(),s.stopPropagation(),t?.())}),e.addEventListener("copy",s=>{s.stopPropagation()}),e.addEventListener("paste",s=>{s.stopPropagation()}),e.showModal()}class C{constructor(t){this.children=[],this.parent=t}delete(t){const s=this.children.indexOf(t);return s===-1?!1:(this.children=this.children.slice(0,s).concat(this.children.slice(s+1)),this.children.length===0&&this.parent.delete(this),!0)}add(t){return this.children.push(t),this}}class w{constructor(t){this.parent=null,this.children={},this.parent=t||null}get(t){return this.children[t]}insert(t){let s=this;for(let i=0;i<t.length;i+=1){const n=t[i];let o=s.get(n);if(i===t.length-1)return o instanceof w&&(s.delete(o),o=null),o||(o=new C(s),s.children[n]=o),o;o instanceof C&&(o=null),o||(o=new w(s),s.children[n]=o),s=o}return s}delete(t){for(const s in this.children)if(this.children[s]===t){const n=delete this.children[s];return Object.keys(this.children).length===0&&this.parent&&this.parent.delete(this),n}return!1}}const oe={"¡":"1","™":"2","£":"3","¢":"4","∞":"5","§":"6","¶":"7","•":"8",ª:"9",º:"0","–":"-","≠":"=","⁄":"!","€":"@","‹":"#","›":"$",ﬁ:"%",ﬂ:"^","‡":"&","°":"*","·":"(","‚":")","—":"_","±":"+",œ:"q","∑":"w","®":"r","†":"t","¥":"y",ø:"o",π:"p","“":"[","‘":"]","«":"\\",Œ:"Q","„":"W","´":"E","‰":"R","ˇ":"T",Á:"Y","¨":"U","ˆ":"I",Ø:"O","∏":"P","”":"{","’":"}","»":"|",å:"a",ß:"s","∂":"d",ƒ:"f","©":"g","˙":"h","∆":"j","˚":"k","¬":"l","…":";",æ:"'",Å:"A",Í:"S",Î:"D",Ï:"F","˝":"G",Ó:"H",Ô:"J","":"K",Ò:"L",Ú:":",Æ:'"',Ω:"z","≈":"x",ç:"c","√":"v","∫":"b",µ:"m","≤":",","≥":".","÷":"/","¸":"Z","˛":"X",Ç:"C","◊":"V",ı:"B","˜":"N",Â:"M","¯":"<","˘":">","¿":"?"},re={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+","[":"{","]":"}","\\":"|",";":":","'":'"',",":"<",".":">","/":"?",q:"Q",w:"W",e:"E",r:"R",t:"T",y:"Y",u:"U",i:"I",o:"O",p:"P",a:"A",s:"S",d:"D",f:"F",g:"G",h:"H",j:"J",k:"K",l:"L",z:"Z",x:"X",c:"C",v:"V",b:"B",n:"N",m:"M"},ae={" ":"Space","+":"Plus"};function W(e,t=navigator.platform){var s,i,n;const{ctrlKey:o,altKey:a,metaKey:l,shiftKey:p,key:L}=e,_=[],I=[o,a,l,p];for(const[v,E]of I.entries())E&&_.push(x[v]);if(!x.includes(L)){const v=_.includes("Alt")&&P.test(t)&&(s=oe[L])!==null&&s!==void 0?s:L,E=_.includes("Shift")&&P.test(t)&&(i=re[v])!==null&&i!==void 0?i:v,Z=(n=ae[E])!==null&&n!==void 0?n:E;_.push(Z)}return _.join("+")}const x=["Control","Alt","Meta","Shift"];function ce(e,t){let s;return s=le(e),s=de(s),s}const P=/Mac|iPod|iPhone|iPad/i;function le(e,t){var s;const i=typeof window>"u"?void 0:window,n=(s=i?.navigator.platform)!==null&&s!==void 0?s:"",o=P.test(n)?"Meta":"Control";return e.replace("Mod",o)}function de(e){const t=e.split("+").pop(),s=[];for(const i of["Control","Alt","Meta","Shift"])e.includes(i)&&s.push(i);return t&&s.push(t),s.join("+")}const j=" ";class A{constructor({onReset:t}={}){this._path=[],this.timer=null,this.onReset=t}get path(){return this._path}get sequence(){return this._path.join(j)}registerKeypress(t){this._path=[...this._path,W(t)],this.startTimer()}reset(){var t;this.killTimer(),this._path=[],(t=this.onReset)===null||t===void 0||t.call(this)}killTimer(){this.timer!=null&&window.clearTimeout(this.timer),this.timer=null}startTimer(){this.killTimer(),this.timer=window.setTimeout(()=>this.reset(),A.CHORD_TIMEOUT)}}A.CHORD_TIMEOUT=1500;function M(e){if(!(e instanceof HTMLElement))return!1;const t=e.nodeName.toLowerCase(),s=(e.getAttribute("type")||"").toLowerCase();return t==="select"||t==="textarea"||t==="input"&&s!=="submit"&&s!=="reset"&&s!=="checkbox"&&s!=="radio"&&s!=="file"||e.isContentEditable}function ue(e,t){const s=new CustomEvent("hotkey-fire",{cancelable:!0,detail:{path:t}});e.dispatchEvent(s)&&(M(e)?e.focus():e.click())}function ge(e){const t=[];let s=[""],i=!1;for(let n=0;n<e.length;n++){if(i&&e[n]===","){t.push(s),s=[""],i=!1;continue}if(e[n]===j){s.push(""),i=!1;continue}else e[n]==="+"?i=!1:i=!0;s[s.length-1]+=e[n]}return t.push(s),t.map(n=>n.map(o=>ce(o)).filter(o=>o!=="")).filter(n=>n.length>0)}const m=new w,G=new WeakMap;let D=m;const k=new A({onReset(){D=m}});function V(e){if(e.defaultPrevented||!(e.target instanceof Node))return;if(M(e.target)){const s=e.target;if(!s.id||!s.ownerDocument.querySelector(`[data-hotkey-scope="${s.id}"]`))return}const t=D.get(W(e));if(!t){k.reset();return}if(k.registerKeypress(e),D=t,t instanceof C){const s=e.target;let i=!1,n;const o=M(s);for(let a=t.children.length-1;a>=0;a-=1){n=t.children[a];const l=n.getAttribute("data-hotkey-scope");if(!o&&!l||o&&s.id===l){i=!0;break}}n&&i&&(ue(n,k.path),e.preventDefault()),k.reset()}}function he(e,t){Object.keys(m.children).length===0&&document.addEventListener("keydown",V);const i=ge(e.getAttribute("data-hotkey")||"").map(n=>m.insert(n).add(e));G.set(e,i)}function fe(e){const t=G.get(e);if(t&&t.length)for(const s of t)s&&s.delete(e);Object.keys(m.children).length===0&&document.removeEventListener("keydown",V)}function b(e){for(const t of e.querySelectorAll("[data-hotkey]"))he(t)}function R(e){for(const t of e.querySelectorAll("[data-hotkey]"))fe(t)}const f=[],c=[];function Ae(e){c.length===0&&b(e),f.push(e)}function Ne(e){c.length===0&&R(e);for(let t=0;t<f.length;t++)if(f[t]===e){f.splice(t,1);break}}function Y(e){if(c.length===0)for(const t of f)R(t);else R(c[c.length-1]);b(e),c.push(e)}function Q(e){for(let t=0;t<c.length;t++)if(c[t]===e){c.splice(t,1),t===c.length&&R(e);break}if(c.length===0)for(const t of f)b(t);else b(c[c.length-1])}const _e={class:"message-area"},ve={class:"message"},me={class:"main-buttons"},Oe=H({__name:"ConfirmDialog",setup(e){const t=X(),s=U(),i=()=>{t.ok()},n=()=>{t.cancel()};return q(()=>{B(s.value,n),Y(s.value)}),$(()=>{Q(s.value)}),(o,a)=>(h(),g("dialog",{ref_key:"dialog",ref:s,class:"message-box"},[r("div",_e,[N(O,{icon:d(F).QUESTION},null,8,["icon"]),r("div",ve,u(d(t).message),1)]),r("div",me,[r("button",{"data-hotkey":"Enter",autofocus:"",onClick:a[0]||(a[0]=l=>i())},"OK"),r("button",{"data-hotkey":"Escape",onClick:a[1]||(a[1]=l=>n())},u(d(S).cancel),1)])],512))}}),pe={class:"message-area"},Le={class:"column"},Ee={class:"notice"},ke={class:"index"},Se={key:0},Fe={class:"message"},we={class:"main-buttons"},be=H({__name:"ErrorMessage",setup(e){const t=J(),s=U();q(()=>{B(s.value,n),Y(s.value)}),$(()=>{Q(s.value)});const i=()=>{navigator.clipboard.writeText(t.errors.map(o=>o.count===1?o.message:`${o.message} (${o.count})`).join(`
`))},n=()=>{t.clear()};return(o,a)=>(h(),g("dialog",{ref_key:"dialog",ref:s,class:"message-box"},[r("div",pe,[N(O,{icon:d(F).ERROR},null,8,["icon"]),r("div",Le,[r("div",Ee,u(d(S).errorsOccurred(d(t).errors.length)),1),(h(!0),g(T,null,ee(d(t).errors,(l,p)=>(h(),g("div",{key:p,class:"item"},[r("p",ke,[y(u(p+1)+" ",1),l.count>=2?(h(),g("span",Se,"("+u(l.count)+" 回)",1)):te("",!0)]),r("p",Fe,u(l.message),1)]))),128))])]),r("div",null,[r("button",{onClick:i},[N(O,{icon:d(F).COPY},null,8,["icon"]),y(u(d(S).copy),1)])]),r("div",we,[r("button",{autofocus:"","data-hotkey":"Escape",onClick:a[0]||(a[0]=l=>n())},u(d(S).close),1)])],512))}}),Ce=se(be,[["__scopeId","data-v-61b71337"]]);export{Ce as E,F as I,O as _,Ae as a,Ne as b,Oe as c,Y as i,ne as p,B as s,Q as u};
