import{cv as E,cw as ee,k as te,Z as C,cx as oe,cy as se,cz as le,e as ae,U as D,ad as re,a2 as ne,D as ue,l as ie,f as c,o as i,g as o,V as L,m as h,A as e,x as u,t as s,F as M,s as O,u as _,bD as w,j as I,am as T,b5 as S,q as ce,cA as pe,cB as de,cC as he,_ as _e,aw as A,bE as ve,bF as fe}from"./confirm-LE9pv2Wk.js";import{I as me,_ as ye,E as Ce,c as be}from"./ErrorMessage-C0hQdB7o.js";import{u as Pe,i as W,H as R,T as v,a as k}from"./HorizontalSelector-XBHpwfLm.js";import{I as ke}from"./InfoMessage-BX1W05-l.js";class ge{_reactive;_currentProfileURI=E;_customProfileList=ee();constructor(){this._reactive=te(this)}get reactive(){return this._reactive}get currentProfileURI(){return this._currentProfileURI}get customLayoutProfiles(){return this._customProfileList.profiles}selectProfile(m){this._currentProfileURI=m,C.updateLayoutProfileList(this._currentProfileURI,this._customProfileList)}addCustomProfile(m){const y=oe(this._customProfileList,m);this._currentProfileURI=y,C.updateLayoutProfileList(this._currentProfileURI,this._customProfileList)}duplicateCustomProfile(m){const y=se(this._customProfileList,m);y&&(this._currentProfileURI=y,C.updateLayoutProfileList(this._currentProfileURI,this._customProfileList))}removeCustomProfile(m){le(this._customProfileList,m),this._currentProfileURI=E,C.updateLayoutProfileList(this._currentProfileURI,this._customProfileList)}updateCustomProfile(m,y){for(let P=0;P<this._customProfileList.profiles.length;P++)if(this._customProfileList.profiles[P].uri===m){this._customProfileList.profiles[P]=y,this._currentProfileURI=m;break}C.updateLayoutProfileList(this._currentProfileURI,this._customProfileList)}async setup(){[this._currentProfileURI,this._customProfileList]=await C.loadLayoutProfileList()}}function Ue(){return new ge().reactive}let B;function G(){return B||(B=Ue()),B}const we={class:"main full column"},Ie={class:"header column"},Re=["value"],Le=["value"],Te=["value"],Se={class:"row wrap buttons"},Be={key:0,class:"custom-profile column grow scroll"},Ee={class:"column"},Ae=["value"],De={class:"uri row"},Ne={class:"row"},Fe={class:"row"},Me={class:"key"},Oe={class:"row"},We=["value"],Ge={class:"row"},ze={value:"Board"},Ye={value:"Record"},He={value:"Book"},qe={value:"Chart"},Ve={value:"Analytics"},Xe={value:"Comment"},$e={value:"RecordInfo"},je={value:"ControlGroup1"},Ze={value:"ControlGroup2"},Je={value:"SimpleBoard"},Ke={class:"name"},Qe={key:0},xe={key:1},et={key:2},tt={key:3},ot={key:4},st={key:5},lt={key:6},at={key:7},rt={key:8},nt={key:9},ut={class:"property"},it={class:"key"},ct=["value","onInput"],pt={class:"property"},dt={class:"key"},ht=["value","onInput"],_t={class:"property"},vt={class:"key"},ft=["value","onInput"],mt={class:"property"},yt={class:"key"},Ct=["value","onInput"],bt={key:0},Pt={class:"property"},kt={class:"property"},gt={key:1},Ut={class:"property"},wt={class:"property"},It={class:"property"},Rt={class:"property"},Lt={key:2},Tt={class:"property"},St={class:"property"},Bt={key:3},Et={class:"property"},At={class:"property"},Dt={class:"property"},Nt={class:"property"},Ft={class:"property"},Mt={class:"property"},Ot={class:"property"},Wt={class:"property"},Gt={class:"property"},zt={key:4},Yt={class:"property"},Ht={key:5},qt={class:"property"},Vt={class:"key"},Xt={class:"property"},$t={class:"key"},jt=["value","onInput"],Zt={class:"property"},Jt={class:"key"},Kt=["value","onInput"],Qt={class:"property"},xt=["onClick"],eo=["onClick"],to=["onClick"],oo=ae({__name:"LayoutManager",setup(g){const m=D(),y=Pe(),P=re(),N=ne(),d=G(),F=ue(),f=ie(()=>d.customLayoutProfiles.find(n=>n.uri===d.currentProfileURI)),z=n=>{const a=n.target;d.selectProfile(a.value)},Y=()=>{d.addCustomProfile()},H=()=>{d.duplicateCustomProfile(d.currentProfileURI)},q=()=>{d.currentProfileURI.startsWith(pe)&&N.show({message:s.areYouSureWantToRemoveCurrentProfile,onOk:()=>{d.removeCustomProfile(d.currentProfileURI)}})},b=()=>d.customLayoutProfiles.find(n=>n.uri===d.currentProfileURI),V=()=>{const n=b();if(n){const a=de(n);navigator.clipboard.writeText(a),y.enqueue({text:s.profileExportedToClipboard})}},X=async()=>{try{const n=await navigator.clipboard.readText(),a=he(n);d.addCustomProfile(a),y.enqueue({text:s.profileImported})}catch{P.add(new Error(s.failedToImportProfile))}},$=()=>{const n=b();n&&navigator.clipboard.writeText(n.uri)},j=async()=>{const n=b();if(n)try{await C.createDesktopShortcutForLayoutProfile(n.uri,n.name),y.enqueue({text:s.desktopShortcutCreated})}catch(a){P.add(a)}},U=(n,a)=>{const t=b();t&&d.updateCustomProfile(d.currentProfileURI,{...t,[n]:a})},p=(n,a,t)=>{const r=b();r&&d.updateCustomProfile(d.currentProfileURI,{...r,components:r.components.map((l,x)=>x!==n?l:{...l,[a]:t})})},Z=n=>{const a=b();if(!a||n<=0)return;const t=[...a.components],r=t[n-1];t[n-1]=t[n],t[n]=r,d.updateCustomProfile(d.currentProfileURI,{...a,components:t})},J=n=>{const a=b();if(!a||n>=a.components.length-1)return;const t=[...a.components],r=t[n+1];t[n+1]=t[n],t[n]=r,d.updateCustomProfile(d.currentProfileURI,{...a,components:t})},K=n=>{const a=b();a&&d.updateCustomProfile(d.currentProfileURI,{...a,components:a.components.filter((t,r)=>r!==n)})},Q=()=>{const n=b();if(!n)return;const a=[...n.components],t=F.value.value;switch(t){case"Board":a.unshift({type:t,left:0,top:0,width:800,height:600});break;case"Record":a.unshift({type:"Record",left:0,top:0,width:400,height:500});break;case"Book":a.unshift({type:"Book",left:0,top:0,width:500,height:250});break;case"Chart":a.unshift({type:"Chart",left:0,top:0,width:600,height:300,chartType:T.RAW});break;case"Analytics":a.unshift({type:"Analytics",left:0,top:0,width:600,height:300});break;case"Comment":a.unshift({type:t,left:0,top:0,width:250,height:250});break;case"RecordInfo":a.unshift({type:t,left:0,top:0,width:400,height:300});break;case"ControlGroup1":case"ControlGroup2":a.unshift({type:t,left:0,top:0,width:150,height:200});break;case"SimpleBoard":a.unshift({type:t,left:0,top:0,width:400,height:300});break}d.updateCustomProfile(d.currentProfileURI,{...n,components:a})};return(n,a)=>(i(),c("div",{class:ce(["root full",e(m).thema])},[o("div",we,[o("div",Ie,[o("select",{value:e(d).currentProfileURI,onChange:z},[o("option",{value:E},u(e(s).standard),9,Le),(i(!0),c(M,null,O(e(d).customLayoutProfiles,(t,r)=>(i(),c("option",{key:r,value:t.uri},u(t.name),9,Te))),128))],40,Re),o("div",Se,[o("button",{class:"thin",onClick:Y},u(e(s).addCustomLayoutProfile),1),f.value?(i(),c("button",{key:0,class:"thin",onClick:H},u(e(s).duplicateCurrentProfile),1)):h("",!0),f.value?(i(),c("button",{key:1,class:"thin",onClick:q},u(e(s).removeCurrentProfile),1)):h("",!0),f.value?(i(),c("button",{key:2,class:"thin",onClick:V},u(e(s).exportProfileToClipboard),1)):h("",!0),o("button",{class:"thin",onClick:X},u(e(s).importProfileFromClipboard),1)])]),f.value?(i(),c("div",Be,[o("div",Ee,[o("input",{class:"profile-name",value:f.value.name,onInput:a[0]||(a[0]=t=>U("name",e(W)(t)))},null,40,Ae),o("div",De,[a[5]||(a[5]=o("span",null,"URI:",-1)),o("span",null,u(f.value.uri),1),o("button",{onClick:$},[_(ye,{icon:e(me).COPY},null,8,["icon"])])]),o("div",Ne,[o("button",{onClick:j},u(e(s).createDesktopShortcut),1)])]),o("div",Fe,[o("span",Me,u(e(s).dialogPosition)+":",1),_(R,{value:f.value.dialogPosition||e(w).CENTER,items:[{label:e(s).alignLeft,value:e(w).LEFT},{label:e(s).alignCenter,value:e(w).CENTER},{label:e(s).alignRight,value:e(w).RIGHT}],"onUpdate:value":a[1]||(a[1]=t=>U("dialogPosition",t))},null,8,["value","items"])]),o("div",Oe,[_(v,{class:"color-toggle",value:!!f.value.backgroundColor,label:e(s).backgroundColor,"onUpdate:value":a[2]||(a[2]=t=>U("backgroundColor",t?"#000000":void 0))},null,8,["value","label"]),f.value.backgroundColor?(i(),c("input",{key:0,class:"color-selector",type:"color",value:f.value.backgroundColor,onInput:a[3]||(a[3]=t=>U("backgroundColor",e(W)(t)))},null,40,We)):h("",!0),_(v,{class:"backdrop-toggle",value:!!f.value.dialogBackdrop,label:e(s).dialogBackdrop,"onUpdate:value":a[4]||(a[4]=t=>U("dialogBackdrop",t))},null,8,["value","label"])]),o("div",Ge,[o("select",{ref_key:"newComponentType",ref:F,size:"1"},[o("option",ze,u(e(s).board),1),o("option",Ye,u(e(s).record),1),o("option",He,u(e(s).book),1),o("option",qe,u(e(s).chart),1),o("option",Ve,u(e(s).analytics),1),o("option",Xe,u(e(s).comments),1),o("option",$e,u(e(s).recordProperties),1),o("option",je,u(e(s).controlGroup)+"1",1),o("option",Ze,u(e(s).controlGroup)+"2",1),o("option",Je,u(e(s).bookStyleDiagram),1)],512),o("button",{class:"thin",onClick:Q},u(e(s).insert),1)]),(i(!0),c(M,null,O(f.value.components,(t,r)=>(i(),c("div",{key:r,class:"component"},[o("div",Ke,[t.type==="Board"?(i(),c("span",Qe,u(e(s).board),1)):h("",!0),t.type==="Record"?(i(),c("span",xe,u(e(s).record),1)):h("",!0),t.type==="Book"?(i(),c("span",et,u(e(s).book),1)):h("",!0),t.type==="Chart"?(i(),c("span",tt,u(e(s).chart),1)):h("",!0),t.type==="Analytics"?(i(),c("span",ot,u(e(s).analytics),1)):h("",!0),t.type==="Comment"?(i(),c("span",st,u(e(s).comments),1)):h("",!0),t.type==="RecordInfo"?(i(),c("span",lt,u(e(s).recordProperties),1)):h("",!0),t.type==="ControlGroup1"?(i(),c("span",at,u(e(s).controlGroup)+"1",1)):h("",!0),t.type==="ControlGroup2"?(i(),c("span",rt,u(e(s).controlGroup)+"2",1)):h("",!0),t.type==="SimpleBoard"?(i(),c("span",nt,u(e(s).bookStyleDiagram),1)):h("",!0)]),o("div",null,[o("span",ut,[o("span",it,u(e(s).left)+":",1),o("input",{class:"value",type:"number",value:t.left,onInput:l=>p(r,"left",e(k)(l))},null,40,ct)]),o("span",pt,[o("span",dt,u(e(s).top)+":",1),o("input",{class:"value",type:"number",value:t.top,onInput:l=>p(r,"top",e(k)(l))},null,40,ht)]),o("span",_t,[o("span",vt,u(e(s).width)+":",1),o("input",{class:"value",type:"number",value:t.width,onInput:l=>p(r,"width",e(k)(l))},null,40,ft)]),o("span",mt,[o("span",yt,u(e(s).height)+":",1),o("input",{class:"value",type:"number",value:t.height,onInput:l=>p(r,"height",e(k)(l))},null,40,Ct)])]),t.type==="Board"?(i(),c("div",bt,[o("span",Pt,[_(v,{value:!!t.rightControlBox,label:e(s).rightControlBox,"onUpdate:value":l=>p(r,"rightControlBox",l)},null,8,["value","label","onUpdate:value"])]),o("span",kt,[_(v,{value:!!t.leftControlBox,label:e(s).leftControlBox,"onUpdate:value":l=>p(r,"leftControlBox",l)},null,8,["value","label","onUpdate:value"])]),o("span",null,[_(R,{value:t.layoutType||e(I).STANDARD,items:[{label:e(s).standard,value:e(I).STANDARD},{label:e(s).compact,value:e(I).COMPACT},{label:e(s).portrait,value:e(I).PORTRAIT}],"onUpdate:value":l=>p(r,"layoutType",l)},null,8,["value","items","onUpdate:value"])])])):h("",!0),t.type==="Record"?(i(),c("div",gt,[o("span",Ut,[_(v,{value:!!t.showCommentColumn,label:e(s).comments,"onUpdate:value":l=>p(r,"showCommentColumn",l)},null,8,["value","label","onUpdate:value"])]),o("span",wt,[_(v,{value:!!t.showElapsedTimeColumn,label:e(s).elapsedTime,"onUpdate:value":l=>p(r,"showElapsedTimeColumn",l)},null,8,["value","label","onUpdate:value"])]),o("span",It,[_(v,{value:!!t.topControlBox,label:e(s).topControlBox,"onUpdate:value":l=>p(r,"topControlBox",l)},null,8,["value","label","onUpdate:value"])]),o("span",Rt,[_(v,{value:!!t.branches,label:e(s).branches,"onUpdate:value":l=>p(r,"branches",l)},null,8,["value","label","onUpdate:value"])])])):h("",!0),t.type==="Chart"?(i(),c("div",Lt,[o("span",Tt,[_(R,{value:t.chartType,items:[{label:e(s).rawScore,value:e(T).RAW},{label:e(s).estimatedWinRate,value:e(T).WIN_RATE}],"onUpdate:value":l=>p(r,"chartType",l)},null,8,["value","items","onUpdate:value"])]),o("span",St,[_(v,{value:!!t.showLegend,label:e(s).legends,"onUpdate:value":l=>p(r,"showLegend",l)},null,8,["value","label","onUpdate:value"])])])):h("",!0),t.type==="Analytics"?(i(),c("div",Bt,[o("span",Et,[_(v,{value:!!t.historyMode,label:e(s).historyMode,"onUpdate:value":l=>p(r,"historyMode",l)},null,8,["value","label","onUpdate:value"])]),o("span",At,[_(v,{value:!!t.showHeader,label:e(s).headers,"onUpdate:value":l=>p(r,"showHeader",l)},null,8,["value","label","onUpdate:value"])]),o("span",Dt,[_(v,{value:!!t.showTimeColumn,label:e(s).elapsedTime,"onUpdate:value":l=>p(r,"showTimeColumn",l)},null,8,["value","label","onUpdate:value"])]),o("span",Nt,[_(v,{value:!!t.showMultiPvColumn,label:e(s).rank,"onUpdate:value":l=>p(r,"showMultiPvColumn",l)},null,8,["value","label","onUpdate:value"])]),o("span",Ft,[_(v,{value:!!t.showDepthColumn,label:e(s).depth,"onUpdate:value":l=>p(r,"showDepthColumn",l)},null,8,["value","label","onUpdate:value"])]),o("span",Mt,[_(v,{value:!!t.showNodesColumn,label:e(s).nodes,"onUpdate:value":l=>p(r,"showNodesColumn",l)},null,8,["value","label","onUpdate:value"])]),o("span",Ot,[_(v,{value:!!t.showScoreColumn,label:e(s).score,"onUpdate:value":l=>p(r,"showScoreColumn",l)},null,8,["value","label","onUpdate:value"])]),o("span",Wt,[_(v,{value:!!t.showPlayButton,label:e(s).playButton,"onUpdate:value":l=>p(r,"showPlayButton",l)},null,8,["value","label","onUpdate:value"])]),o("span",Gt,[_(v,{value:!!t.showSuggestionsCount,label:e(s).suggestionsCount,"onUpdate:value":l=>p(r,"showSuggestionsCount",l)},null,8,["value","label","onUpdate:value"])])])):h("",!0),t.type==="Comment"?(i(),c("div",zt,[o("span",Yt,[_(v,{value:!!t.showBookmark,label:e(s).bookmark,"onUpdate:value":l=>p(r,"showBookmark",l)},null,8,["value","label","onUpdate:value"])])])):h("",!0),t.type==="SimpleBoard"?(i(),c("div",Ht,[o("span",qt,[o("span",Vt,u(e(s).weight)+":",1),_(R,{value:t.fontWeight||"400",items:[{label:e(s).thin,value:e(S).W400},{label:e(s).bold,value:e(S).W400X},{label:e(s).extraBold,value:e(S).W700X}],"onUpdate:value":l=>p(r,"fontWeight",l)},null,8,["value","items","onUpdate:value"])]),o("span",Xt,[o("span",$t,u(e(s).size)+":",1),o("input",{class:"value",type:"number",min:"0",max:"200",value:t.fontScale||100,onInput:l=>p(r,"fontScale",e(k)(l))},null,40,jt),a[6]||(a[6]=o("span",null,"%",-1))]),o("span",Zt,[o("span",Jt,u(e(s).vertical)+":",1),o("input",{class:"value",type:"number",min:"-100",max:"100",value:t.characterY||0,onInput:l=>p(r,"characterY",e(k)(l))},null,40,Kt)]),o("span",Qt,[_(v,{value:!!t.bookmark,label:e(s).bookmark,"onUpdate:value":l=>p(r,"bookmark",l)},null,8,["value","label","onUpdate:value"])])])):h("",!0),o("div",null,[r!==0?(i(),c("button",{key:0,class:"thin",onClick:()=>Z(r)}," ↑ "+u(e(s).bringForward),9,xt)):h("",!0),r!==f.value.components.length-1?(i(),c("button",{key:1,class:"thin",onClick:()=>J(r)}," ↓ "+u(e(s).sendBackward),9,eo)):h("",!0),o("button",{class:"thin",onClick:()=>K(r)},u(e(s).remove),9,to)])]))),128))])):h("",!0)]),e(y).hasMessage?(i(),L(ke,{key:0})):h("",!0),e(P).hasError?(i(),L(Ce,{key:1})):h("",!0),e(N).message?(i(),L(be,{key:2})):h("",!0)],2))}}),so=_e(oo,[["__scopeId","data-v-6ab23b8a"]]);C.log(A.INFO,"start renderer process (layout manager)");const lo=G(),ao=D();Promise.allSettled([lo.setup(),ao.loadAppSettings().catch(g=>{C.log(A.ERROR,"アプリ設定の読み込み中にエラーが発生しました: "+g)})]).finally(()=>{const g=D().language;ve(g),C.log(A.INFO,"mount app (layout manager)"),fe(so).mount("#app")});
