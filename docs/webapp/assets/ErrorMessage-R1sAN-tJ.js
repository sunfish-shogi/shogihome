import{e as P,f as h,o as f,A as d,a2 as Z,D as H,E as K,G as y,g as c,u as x,x as u,t as b,ad as X,F as J,s as T,ab as ee,m as te,_ as se}from"./confirm-D0nNG7V5.js";const D={};function ie(e){if(D[e])return;const t=document.createElement("img");t.src=e,D[e]=t}var M=(e=>(e.BUSY="busy",e.ERROR="error",e.INFO="info",e.GAME="game",e.INTERNET="internet",e.STOP="stop",e.RESIGN="resign",e.RESEARCH="research",e.END="end",e.QUIZ="quiz",e.EDIT="edit",e.CHECK="check",e.SWAP="swap",e.SWAP_H="swap_h",e.SETTINGS="settings",e.ENGINE_SETTINGS="engineSettings",e.FLIP="flip",e.FILE="file",e.OPEN="open",e.SAVE="save",e.SAVE_AS="saveAs",e.PASTE="paste",e.COPY="copy",e.DELETE="delete",e.COMMENT="comment",e.BRAIN="brain",e.PV="pv",e.CHART="chart",e.PERCENT="percent",e.MONITOR="monitor",e.ARROW_DROP="arrowDrop",e.ARROW_UP="arrowUp",e.FIRST="first",e.BACK="back",e.NEXT="next",e.LAST="last",e.QUESTION="question",e.ANALYSIS="analysis",e.DESCRIPTION="description",e.PLAY="play",e.CLOSE="close",e.CALL="call",e.SCORE="score",e.GRID="grid",e.MATE_SEARCH="mateSearch",e.ADD="add",e.TREE="tree",e.NOTE="note",e.BATCH="batch",e.OPEN_FOLDER="openFolder",e.HISTORY="history",e.PAUSE="pause",e.RESUME="resume",e.HELP="help",e.LICENSE="license",e.LINK="link",e.SHARE="share",e.EQUALIZER="equalizer",e.REFRESH="refresh",e.ROBOT="robot",e.TRASH="trash",e))(M||{});const U={busy:"icon/hourglass_empty.svg",error:"icon/error_outline.svg",info:"icon/info.svg",game:"icon/sports_esports.svg",internet:"icon/language_FILL0.svg",stop:"icon/block.svg",resign:"icon/flag.svg",research:"icon/science.svg",end:"icon/do_disturb_on.svg",quiz:"icon/quiz_FILL0.svg",edit:"icon/app_registration.svg",check:"icon/check_circle.svg",swap:"icon/swap_vert.svg",swap_h:"icon/swap_horiz.svg",settings:"icon/settings.svg",engineSettings:"icon/settings_input_component.svg",flip:"icon/flip_camera_android.svg",file:"icon/draft_FILL0.svg",open:"icon/file_open_FILL0.svg",save:"icon/save_FILL0.svg",saveAs:"icon/save_as_FILL0.svg",paste:"icon/content_paste.svg",copy:"icon/content_copy.svg",delete:"icon/backspace.svg",comment:"icon/edit_note.svg",brain:"icon/psychology.svg",pv:"icon/manage_search_FILL0.svg",chart:"icon/show_chart.svg",percent:"icon/percent.svg",monitor:"icon/browse_activity_FILL0.svg",arrowDrop:"icon/arrow_drop_down.svg",arrowUp:"icon/arrow_drop_up_FILL0.svg",first:"icon/first_page.svg",back:"icon/chevron_left.svg",next:"icon/chevron_right.svg",last:"icon/last_page.svg",question:"icon/help.svg",analysis:"icon/query_stats.svg",description:"icon/description.svg",play:"icon/play_arrow_FILL1.svg",close:"icon/close_FILL0.svg",call:"icon/record_voice_over_FILL0.svg",score:"icon/scoreboard_FILL0.svg",grid:"icon/grid_on_FILL0.svg",mateSearch:"icon/psychology_alt_FILL0.svg",add:"icon/add_circle_FILL0.svg",tree:"icon/account_tree_FILL0.svg",note:"icon/note_alt_FILL0.svg",batch:"icon/home_storage_FILL0.svg",openFolder:"icon/folder_open_FILL0.svg",history:"icon/history_FILL0.svg",pause:"icon/pause_circle_FILL0.svg",resume:"icon/play_circle_FILL0.svg",help:"icon/help_FILL0.svg",license:"icon/license_FILL0.svg",link:"icon/open_in_new_FILL0.svg",share:"icon/share_FILL0.svg",equalizer:"icon/instant_mix_FILL0.svg",refresh:"icon/refresh_FILL0.svg",robot:"icon/smart_toy_FILL0.svg",trash:"icon/delete_FILL0.svg"};Object.values(U).forEach(e=>{ie(e)});const ne=["src"],q=P({__name:"Icon",props:{icon:{type:String,required:!0}},setup(e){return(t,s)=>(f(),h("img",{class:"icon",src:d(U)[e.icon],draggable:"false"},null,8,ne))}});function z(e,t){e.addEventListener("cancel",s=>{s.preventDefault(),s.stopPropagation(),t==null||t()}),e.addEventListener("keydown",s=>{s.key==="Escape"&&(s.preventDefault(),s.stopPropagation(),t==null||t())}),e.addEventListener("copy",s=>{s.stopPropagation()}),e.addEventListener("paste",s=>{s.stopPropagation()}),e.showModal()}class R{constructor(t){this.children=[],this.parent=t}delete(t){const s=this.children.indexOf(t);return s===-1?!1:(this.children=this.children.slice(0,s).concat(this.children.slice(s+1)),this.children.length===0&&this.parent.delete(this),!0)}add(t){return this.children.push(t),this}}class S{constructor(t){this.parent=null,this.children={},this.parent=t||null}get(t){return this.children[t]}insert(t){let s=this;for(let i=0;i<t.length;i+=1){const n=t[i];let o=s.get(n);if(i===t.length-1)return o instanceof S&&(s.delete(o),o=null),o||(o=new R(s),s.children[n]=o),o;o instanceof R&&(o=null),o||(o=new S(s),s.children[n]=o),s=o}return s}delete(t){for(const s in this.children)if(this.children[s]===t){const n=delete this.children[s];return Object.keys(this.children).length===0&&this.parent&&this.parent.delete(this),n}return!1}}const oe={"¡":"1","™":"2","£":"3","¢":"4","∞":"5","§":"6","¶":"7","•":"8",ª:"9",º:"0","–":"-","≠":"=","⁄":"!","€":"@","‹":"#","›":"$",ﬁ:"%",ﬂ:"^","‡":"&","°":"*","·":"(","‚":")","—":"_","±":"+",œ:"q","∑":"w","®":"r","†":"t","¥":"y",ø:"o",π:"p","“":"[","‘":"]","«":"\\",Œ:"Q","„":"W","´":"E","‰":"R","ˇ":"T",Á:"Y","¨":"U","ˆ":"I",Ø:"O","∏":"P","”":"{","’":"}","»":"|",å:"a",ß:"s","∂":"d",ƒ:"f","©":"g","˙":"h","∆":"j","˚":"k","¬":"l","…":";",æ:"'",Å:"A",Í:"S",Î:"D",Ï:"F","˝":"G",Ó:"H",Ô:"J","":"K",Ò:"L",Ú:":",Æ:'"',Ω:"z","≈":"x",ç:"c","√":"v","∫":"b",µ:"m","≤":",","≥":".","÷":"/","¸":"Z","˛":"X",Ç:"C","◊":"V",ı:"B","˜":"N",Â:"M","¯":"<","˘":">","¿":"?"},re={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+","[":"{","]":"}","\\":"|",";":":","'":'"',",":"<",".":">","/":"?",q:"Q",w:"W",e:"E",r:"R",t:"T",y:"Y",u:"U",i:"I",o:"O",p:"P",a:"A",s:"S",d:"D",f:"F",g:"G",h:"H",j:"J",k:"K",l:"L",z:"Z",x:"X",c:"C",v:"V",b:"B",n:"N",m:"M"},ae={" ":"Space","+":"Plus"};function $(e,t=navigator.platform){var s,i,n;const{ctrlKey:o,altKey:r,metaKey:l,shiftKey:Q,key:p}=e,_=[],Y=[o,r,l,Q];for(const[v,L]of Y.entries())L&&_.push(C[v]);if(!C.includes(p)){const v=_.includes("Alt")&&A.test(t)&&(s=oe[p])!==null&&s!==void 0?s:p,L=_.includes("Shift")&&A.test(t)&&(i=re[v])!==null&&i!==void 0?i:v,I=(n=ae[L])!==null&&n!==void 0?n:L;_.push(I)}return _.join("+")}const C=["Control","Alt","Meta","Shift"];function ce(e,t){let s;return s=le(e),s=de(s),s}const A=/Mac|iPod|iPhone|iPad/i;function le(e,t){var s;const i=typeof window>"u"?void 0:window,n=(s=i==null?void 0:i.navigator.platform)!==null&&s!==void 0?s:"",o=A.test(n)?"Meta":"Control";return e.replace("Mod",o)}function de(e){const t=e.split("+").pop(),s=[];for(const i of["Control","Alt","Meta","Shift"])e.includes(i)&&s.push(i);return t&&s.push(t),s.join("+")}const B=" ";class w{constructor({onReset:t}={}){this._path=[],this.timer=null,this.onReset=t}get path(){return this._path}get sequence(){return this._path.join(B)}registerKeypress(t){this._path=[...this._path,$(t)],this.startTimer()}reset(){var t;this.killTimer(),this._path=[],(t=this.onReset)===null||t===void 0||t.call(this)}killTimer(){this.timer!=null&&window.clearTimeout(this.timer),this.timer=null}startTimer(){this.killTimer(),this.timer=window.setTimeout(()=>this.reset(),w.CHORD_TIMEOUT)}}w.CHORD_TIMEOUT=1500;function N(e){if(!(e instanceof HTMLElement))return!1;const t=e.nodeName.toLowerCase(),s=(e.getAttribute("type")||"").toLowerCase();return t==="select"||t==="textarea"||t==="input"&&s!=="submit"&&s!=="reset"&&s!=="checkbox"&&s!=="radio"&&s!=="file"||e.isContentEditable}function ue(e,t){const s=new CustomEvent("hotkey-fire",{cancelable:!0,detail:{path:t}});e.dispatchEvent(s)&&(N(e)?e.focus():e.click())}function he(e){const t=[];let s=[""],i=!1;for(let n=0;n<e.length;n++){if(i&&e[n]===","){t.push(s),s=[""],i=!1;continue}if(e[n]===B){s.push(""),i=!1;continue}else e[n]==="+"?i=!1:i=!0;s[s.length-1]+=e[n]}return t.push(s),t.map(n=>n.map(o=>ce(o)).filter(o=>o!=="")).filter(n=>n.length>0)}const m=new S,W=new WeakMap;let O=m;const E=new w({onReset(){O=m}});function j(e){if(e.defaultPrevented||!(e.target instanceof Node))return;if(N(e.target)){const s=e.target;if(!s.id||!s.ownerDocument.querySelector(`[data-hotkey-scope="${s.id}"]`))return}const t=O.get($(e));if(!t){E.reset();return}if(E.registerKeypress(e),O=t,t instanceof R){const s=e.target;let i=!1,n;const o=N(s);for(let r=t.children.length-1;r>=0;r-=1){n=t.children[r];const l=n.getAttribute("data-hotkey-scope");if(!o&&!l||o&&s.id===l){i=!0;break}}n&&i&&(ue(n,E.path),e.preventDefault()),E.reset()}}function fe(e,t){Object.keys(m.children).length===0&&document.addEventListener("keydown",j);const i=he(e.getAttribute("data-hotkey")||"").map(n=>m.insert(n).add(e));W.set(e,i)}function ge(e){const t=W.get(e);if(t&&t.length)for(const s of t)s&&s.delete(e);Object.keys(m.children).length===0&&document.removeEventListener("keydown",j)}function k(e){for(const t of e.querySelectorAll("[data-hotkey]"))fe(t)}function F(e){for(const t of e.querySelectorAll("[data-hotkey]"))ge(t)}const g=[],a=[];function Ae(e){a.length===0&&k(e),g.push(e)}function Ne(e){a.length===0&&F(e);for(let t=0;t<g.length;t++)if(g[t]===e){g.splice(t,1);break}}function G(e){if(a.length===0)for(const t of g)F(t);else F(a[a.length-1]);k(e),a.push(e)}function V(e){for(let t=0;t<a.length;t++)if(a[t]===e){a.splice(t,1),t===a.length&&F(e);break}if(a.length===0)for(const t of g)k(t);else k(a[a.length-1])}const _e={class:"message-area"},ve={class:"message"},me={class:"main-buttons"},Oe=P({__name:"ConfirmDialog",setup(e){const t=Z(),s=H(),i=()=>{t.ok()},n=()=>{t.cancel()};return K(()=>{z(s.value,n),G(s.value)}),y(()=>{V(s.value)}),(o,r)=>(f(),h("dialog",{ref_key:"dialog",ref:s,class:"message-box"},[c("div",_e,[x(q,{icon:d(M).QUESTION},null,8,["icon"]),c("div",ve,u(d(t).message),1)]),c("div",me,[c("button",{"data-hotkey":"Enter",autofocus:"",onClick:r[0]||(r[0]=l=>i())},"OK"),c("button",{"data-hotkey":"Escape",onClick:r[1]||(r[1]=l=>n())},u(d(b).cancel),1)])],512))}}),pe={class:"message-area"},Le={class:"column"},Ee={class:"notice"},Se={class:"index"},ke={key:0},Fe={class:"message"},we={class:"main-buttons"},be=P({__name:"ErrorMessage",setup(e){const t=X(),s=H();K(()=>{z(s.value,i),G(s.value)}),y(()=>{V(s.value)});const i=()=>{t.clear()};return(n,o)=>(f(),h("dialog",{ref_key:"dialog",ref:s,class:"message-box"},[c("div",pe,[x(q,{icon:d(M).ERROR},null,8,["icon"]),c("div",Le,[c("div",Ee,u(d(b).errorsOccurred(d(t).errors.length)),1),(f(!0),h(J,null,T(d(t).errors,(r,l)=>(f(),h("div",{key:l,class:"item"},[c("p",Se,[ee(u(l+1)+" ",1),r.count>=2?(f(),h("span",ke,"("+u(r.count)+" 回)",1)):te("",!0)]),c("p",Fe,u(r.message),1)]))),128))])]),c("div",we,[c("button",{autofocus:"","data-hotkey":"Escape",onClick:o[0]||(o[0]=r=>i())},u(d(b).close),1)])],512))}}),Pe=se(be,[["__scopeId","data-v-90d36a9f"]]);export{Pe as E,M as I,q as _,Ae as a,Ne as b,Oe as c,G as i,ie as p,z as s,V as u};
